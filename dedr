local player = game:GetService("Players").LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Define Item and Variant Paths
local itemPath = game:GetService("ReplicatedStorage").Items["Bloodmoon Whale"]
local variantPath = game:GetService("ReplicatedStorage").Variants["Fairy Dust"]

-- Check if Item and Variant Exist
if not itemPath then
    warn("Bloodmoon Whale item not found in ReplicatedStorage.Items.")
    return
end

if not variantPath then
    warn("Fairy Dust variant not found in ReplicatedStorage.Variants.")
    -- It might be okay to continue even if the variant isn't found, depending on how the game handles it.
    -- Remove the 'return' if you want to proceed without the variant.
end

-- Function to find or create the player's inventory folder
local function getOrCreateInventoryFolder()
    local inventoryFolder = player:FindFirstChild("Inventory")
    if not inventoryFolder then
        inventoryFolder = Instance.new("Folder")
        inventoryFolder.Name = "Inventory"
        inventoryFolder.Parent = player
    end
    return inventoryFolder
end

-- Function to create the item instance and add it to the inventory
local function giveItemToPlayer()
    local inventoryFolder = getOrCreateInventoryFolder()

    -- Clone the item from ReplicatedStorage
    local newItem = itemPath:Clone()
    newItem.Name = "Bloodmoon Whale" -- Important: Setting the name

	--Set Weight
	newItem:SetAttribute("Weight", 525584) -- Use SetAttribute instead of directly assigning to Weight.

	--Set Size Attribute
	newItem:SetAttribute("Size", "Big")--Using Attribute because it is more often being used than a size value.
	--Setting Size
	local sizeValue = Instance.new("StringValue")--If item uses String Value, if Integer use IntValue instead.
	sizeValue.Name = "Size"
	sizeValue.Value = "Big"
	sizeValue.Parent = newItem

	-- Check if the newItem has the correct Attributes
	if newItem:GetAttribute("Weight") == 525584 and newItem:GetAttribute("Size") == "Big" then
		print("Successfully set weight and size attributes.")
	else
		warn("Failed to set weight or size attributes.")
	end

    newItem.Parent = inventoryFolder --Parent after setting attributes
    print("Successfully added Bloodmoon Whale to inventory folder (hopefully!).") --Clarified output

	--Optional: Apply Variant (If Applicable)
	if variantPath then
		-- This is where you would add the logic to apply the variant to the item.
		-- The exact implementation depends on how the game handles variants.
		-- Example (very likely wrong, but illustrative):
		-- local variant = variantPath:Clone()
		-- variant.Parent = newItem
		-- print("Variant applied (if applicable).")
		warn("No variant application logic implemented.  You need to figure out how the game applies variants.")
	end

	--Attempt to trigger the inventory update remotely.  This is a long shot.
	local inventoryUpdateEvent = game:GetService("ReplicatedStorage"):FindFirstChild("InventoryUpdate") -- Replace "InventoryUpdate" with the actual RemoteEvent name.

	if inventoryUpdateEvent and inventoryUpdateEvent:IsA("RemoteEvent") then
		inventoryUpdateEvent:FireServer(newItem)
		print("Attempted to trigger InventoryUpdate RemoteEvent (if it exists).")
	else
		warn("InventoryUpdate RemoteEvent not found.  Cannot trigger inventory update.")
	end

end

-- Attempt to Give the item to the Player
giveItemToPlayer()
